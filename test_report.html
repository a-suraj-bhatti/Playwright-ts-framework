
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Automation Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .chart-container { width: 45%; margin: 20px auto; }
        #filters { margin-bottom: 20px; }
        select { margin-right: 10px; }
    </style>
</head>
<body>
    <h1>Test Automation Report</h1>
    
    <div id="filters">
        <select id="teamFilter">
            <option value="">All Teams</option>
            <option value="Unknown">Unknown</option>
        </select>
        <select id="functionalityFilter">
            <option value="">All Functionalities</option>
            <option value="descoverride">descoverride</option><option value=""></option><option value="page22">page22</option><option value="add">add</option>
        </select>
        <select id="testTypeFilter">
            <option value="">All Test Types</option>
            <option value="UI">UI</option><option value="API">API</option>
        </select>
        <select id="scenarioTypeFilter">
            <option value="">All Scenario Types</option>
            <option value="positive">positive</option><option value=""></option>
        </select>
    </div>

    <div class="chart-container">
        <canvas id="functionalityChart"></canvas>
    </div>
    <div class="chart-container">
        <canvas id="sprintChart"></canvas>
    </div>
    <div class="chart-container">
        <canvas id="teamChart"></canvas>
    </div>

    <script>
    const data = [{"File Name":"login.spec.ts","Test Name":"Verify that the user is able to login to the application","Functionality":"descoverride","Test Type":"UI","Priority":"high","Scenario Type":"positive","Team Name":"ovvertiode","Sprint":"2024.1.2"},{"File Name":"login.spec.ts","Test Name":"test login page","Functionality":"","Test Type":"UI","Priority":"low","Scenario Type":"","Team Name":"test","Sprint":"2024.1.2"},{"File Name":"login.spec.ts","Test Name":"test login page22","Functionality":"page22","Test Type":"UI","Priority":"low","Scenario Type":"","Team Name":"ace","Sprint":""},{"File Name":"addProductToCart.spec.ts","Test Name":"User logs in to the Sauce Labs Demo page and adds an item to the cart","Functionality":"add","Test Type":"UI","Priority":"medium","Scenario Type":"positive","Team Name":"","Sprint":""},{"File Name":"reqres.spec.ts","Test Name":"GET /api/users/2","Functionality":"","Test Type":"API","Priority":"","Scenario Type":"","Team Name":"","Sprint":""}];
    let filteredData = [...data];

    let functionalityChart, sprintChart, teamChart;

    function updateCharts() {
        const functionalities = {};
        const sprintData = {};
        const teamData = {};

        filteredData.forEach(row => {
            functionalities[row.Functionality] = (functionalities[row.Functionality] || 0) + 1;
            sprintData[row.Sprint] = (sprintData[row.Sprint] || 0) + 1;
            const teamName = row.teamName || 'Unknown';
            teamData[teamName] = (teamData[teamName] || 0) + 1;
        });

        functionalityChart.data.labels = Object.keys(functionalities);
        functionalityChart.data.datasets[0].data = Object.values(functionalities);
        functionalityChart.update();

        sprintChart.data.labels = Object.keys(sprintData);
        sprintChart.data.datasets[0].data = Object.values(sprintData);
        sprintChart.update();

        teamChart.data.labels = Object.keys(teamData);
        teamChart.data.datasets[0].data = Object.values(teamData);
        teamChart.update();
    }

    function applyFilters() {
        const teamFilter = document.getElementById('teamFilter').value;
        const functionalityFilter = document.getElementById('functionalityFilter').value;
        const testTypeFilter = document.getElementById('testTypeFilter').value;
        const scenarioTypeFilter = document.getElementById('scenarioTypeFilter').value;

        filteredData = data.filter(row => 
            (teamFilter === '' || (row.teamName || 'Unknown') === teamFilter) &&
            (functionalityFilter === '' || row.Functionality === functionalityFilter) &&
            (testTypeFilter === '' || row['Test Type'] === testTypeFilter) &&
            (scenarioTypeFilter === '' || row['Scenario Type'] === scenarioTypeFilter)
        );

        updateCharts();
    }

    document.getElementById('teamFilter').addEventListener('change', applyFilters);
    document.getElementById('functionalityFilter').addEventListener('change', applyFilters);
    document.getElementById('testTypeFilter').addEventListener('change', applyFilters);
    document.getElementById('scenarioTypeFilter').addEventListener('change', applyFilters);

    function initCharts() {
        // Create functionality pie chart
        functionalityChart = new Chart(document.getElementById('functionalityChart'), {
            type: 'pie',
            data: {
                labels: Object.keys({"descoverride":1,"":2,"page22":1,"add":1}),
                datasets: [{
                    data: Object.values({"descoverride":1,"":2,"page22":1,"add":1}),
                    backgroundColor: Object.keys({"descoverride":1,"":2,"page22":1,"add":1}).map(() => 
                        '#' + Math.floor(Math.random()*16777215).toString(16)
                    )
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Tests by Functionality'
                    }
                }
            }
        });

        // Create sprint bar chart
        sprintChart = new Chart(document.getElementById('sprintChart'), {
            type: 'bar',
            data: {
                labels: Object.keys({"2024.1.2":2,"":3}),
                datasets: [{
                    label: 'Tests per Sprint',
                    data: Object.values({"2024.1.2":2,"":3}),
                    backgroundColor: 'rgba(75, 192, 192, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Tests by Sprint'
                    }
                }
            }
        });

        // Create team bar chart
        teamChart = new Chart(document.getElementById('teamChart'), {
            type: 'bar',
            data: {
                labels: Object.keys({"Unknown":5}),
                datasets: [{
                    label: 'Tests per Team',
                    data: Object.values({"Unknown":5}),
                    backgroundColor: 'rgba(153, 102, 255, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Tests by Team'
                    }
                }
            }
        });
    }

    // Initialize charts when the page loads
    window.onload = initCharts;
    </script>
</body>
</html>
